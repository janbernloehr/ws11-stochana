% Dieser Style definiert alles Notwendige um mathematische Texte
% zu setzten.
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{vlskript}[2011/04/28 v. 1.0 common document style]

% =============================================================================
% 					KOMA Optionen Deklaration
% =============================================================================
\DeclareOption{pdftitle}{ \PassOptionsToPackage{{\CurrentOption}}{hyperref} }
\DeclareOption{pdfauthor}{ \PassOptionsToPackage{{\CurrentOption}}{hyperref} }
\DeclareOption{baseurl}{ \PassOptionsToPackage{{\CurrentOption}}{hyperref} }

\KOMAProcessOptions\relax

% =============================================================================
% 					Paket Einbindung
% =============================================================================
\RequirePackage{ifthen}					% if, then, else in latex
\RequirePackage[ngerman]{babel}			% Deutsche Silbentrennung
\RequirePackage[utf8x]{inputenc}		% UTF-8 Encoding 
\RequirePackage[T1]{fontenc}			% T1 Fonts

\RequirePackage{amsmath,mathtools}      % Standard Mathe Pakete

\IfFileExists{lucimatx.sty}{%
    \RequirePackage[romanfamily=bright-osf,math-style=iso,stdmathdigits=true,scale=.79]%
			   {lucimatx}
  }{%
    \PackageWarning{janmrep}{%
      Package lucimatx not available, instead
      we use the fourier font.\MessageBreak
    }%
    \RequirePackage{amssymb}
    \RequirePackage{fourier}
  }%

\RequirePackage[mathscr]{euscript}		% Euler Skript
\RequirePackage{scalefnt}				% Scale Font

\RequirePackage{enumitem}				% Eigene Aufz�hlungen
\RequirePackage{xspace}

% \RequirePackage{pstricks-add,pst-pdf}	% Zeichnungen mit pstricks
% \RequirePackage{float}					% Setzen von figures.

\RequirePackage{color}	 				% Farben
\RequirePackage{caption} 				% Abbildungs�berschriten

\RequirePackage{scrpage2}               % Header / Footer
\RequirePackage{marginnote}				% Schreiben in margin

\RequirePackage{makeidx}				% Bibliography
\RequirePackage[numbers,sort&compress]{natbib}
\RequirePackage[refpage,intoc,german]{nomencl}

\RequirePackage{bbding}					% Proof Symbol

\RequirePackage[thmmarks,amsmath,amsthm]
			   {ntheorem}				% Theorem Umgebungen


% PDF Optionen
\RequirePackage[
hyperfootnotes=true, % Fu�noten verlinken
hyperindex=true, % Seitenzahlen als Link
breaklinks=true, % Zeilenumbruch bei Links
colorlinks=true, % true = farbige Links, false = Rahmen
linkcolor=linkred, % Farbe f�r Links auf gleicher Seite
citecolor=gray, % Farbe f�r Links auf Zitatstellen
filecolor=magenta,
urlcolor=linkred, % Farbe f�r Links auf URLs
anchorcolor=blue, % Farbe f�r Anker (?)
menucolor=red, % Farbe f�r Acrobatmen�eintr�ge
plainpages=false,
unicode=true, % Mit Unicode kodierte Texte
pdfproducer={pdflatex},
bookmarks=true, % Acrobat-Lesezeichen einf�gen
bookmarksnumbered=true, % Kapitelnummern f�r Lesezeichen
bookmarksopen=true, % Acrobat-Lesezeichen links ge�ffnet
bookmarksopenlevel=2, % Ge�ffnete Hierarchiestufe
pdfview=FitH, % Zoom beim Link-Traversieren
pdfstartview=FitH, % Zoom beim �ffnen
pdfstartpage={1}, % Seite, die angezeigt wird
pdfpagelayout=OneColumn % Anzeigemodus, hier 1 Seite fortlaufend
]{hyperref}

% =============================================================================
% 					Seitenstil
% =============================================================================

% \DeclareCaptionFont{gray-bold}{\small\bfseries\color{gray}}
% \DeclareCaptionFont{gray-light}{\color{gray}\footnotesize}
% 
% \DeclareCaptionLabelFormat{number-only}{#2}
% \DeclareCaptionFormat{llap}{\llap{#1#2}\quad#3\par}
% 
% \captionsetup{format=llap,labelformat=number-only,labelsep=quad,singlelinecheck=no,labelfont=gray-light,textfont=gray-bold}

% Numerierung anpassen
\renewcommand\thesection{\arabic{chapter}-\Alph{section}}
\renewcommand\thesubsection{{\small\ensuremath{\blacksquare}}}

% Section fonts anpassen
\setkomafont{chapter}{\normalfont\boldmath\bfseries\Huge\color{darkblue}}
\setkomafont{section}{\normalfont\boldmath\bfseries\Large\color{darkblue}}
\setkomafont{subsection}{\normalfont\boldmath\bfseries\color{darkblue}}

% \restylefloat{figure}		% Option H='here!' f�r figures

% =============================================================================
% 					Header & Footer
% =============================================================================

\pagestyle{scrheadings}

\setkomafont{pageheadfoot}{\small\color{gdarkgray}}
\setkomafont{pagefoot}{\normalfont\color{gdarkgray}}
\setkomafont{pagenumber}{\color{gdarkgray}}

\renewcommand{\chaptermark}[1]{\markboth{\textsc{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\textsc{#1}}{}}

\rohead{\marginnote{$\Big|$\;\textbf{\thesection}}\headmark}
\lehead{\marginnote{\;\textbf{\thechapter}$\Big|$}\headmark}
\ofoot{\pagemark}
\ifoot{{\tiny\today}}


% =============================================================================
% 					H�ufig verwendete Farben
% =============================================================================

\definecolor{darkblue}{rgb}{0.09,0.20,0.43}
\definecolor{darkgreen}{rgb}{0,0.5,0}
\definecolor{gray}{rgb}{0.39,0.39,0.40}
\definecolor{lightgray}{rgb}{0.9,0.9,0.9}
\definecolor{proofgray}{rgb}{0.3,0.3,0.3}
\definecolor{framecolor}{rgb}{0,0,0}
\definecolor{gdarkgray}{rgb}{0.39,0.39,0.40}
\definecolor{glightgray}{rgb}{0.93,0.93,0.93}

\definecolor{purple}{rgb}{0.55,.16,0.44}
\definecolor{yellow}{rgb}{0.78,.51,0.13}
\definecolor{htmlyellow}{rgb}{1,1,0}
\definecolor{linkred}{rgb}{0.545,0.275,0.29}

% Hervorhebung in Definitionen etc.
\renewcommand{\emph}[1]{{\color{purple}#1}}

% =============================================================================
% 					PSTricks Standards
% =============================================================================

% \psset{linecolor=gdarkgray}
% \psset{tickcolor=gdarkgray}
% \psset{fillcolor=glightgray}

% =============================================================================
% 					Listen
% =============================================================================

\newcommand{\labelitem}		% itemize
	       {\footnotesize\ensuremath{\blacksquare}}
\renewcommand{\labelenumi}	% Standard Aufz�hlung (a)
		     {{\normalfont(\alph{enumi})}}
\renewcommand{\labelitemi}  % Standard Liste
			 {{\footnotesize\ensuremath{\blacksquare}}}

% Vordefinierte Listen
\newenvironment{remenum}%
	{\begin{enumerate}[label=\textsc{\alph{*}}.,leftmargin=17pt]}{\end{enumerate}}
\newenvironment{defnenum}%
	{\begin{enumerate}[label=\arabic{*}.]}{\end{enumerate}}
\newenvironment{defnpropenum}%
	{\begin{enumerate}[label={\rm (\alph{*})}]}{\end{enumerate}}
\newenvironment{propenum}%
	{\begin{enumerate}[label=\alph{*})]}{\end{enumerate}}
\newenvironment{equivenum}%
	{\begin{enumerate}[label=(\roman{*})]}{\end{enumerate}}
\newenvironment{exenum}%
	{\begin{enumerate}[label=\alph{*}.,leftmargin=17pt]}{\end{enumerate}}

% =============================================================================
% 					Styles f�r Theoreme wie Definition, Satz, Beweis etc.
% =============================================================================

% Fonts definieren
\newcommand{\blueheaderfont}%
	{\normalfont\normalsize\bfseries\color{darkblue}}
\newcommand{\yellowheaderfont}%
	{\normalfont\normalsize\bfseries\scshape\small\color{yellow}}
\newcommand{\itheaderfont}%
	{\normalfont\itshape}
\renewcommand{\marginfont}%
	{\normalfont\small\color{gray}}
\newcommand{\prooffont}%
	{\normalfont\normalsize\itshape}

% Styles definieren
\newtheoremstyle{graymarginwithblueheader}%
	{\item[\llap{\marginfont{##2}}\hskip\labelsep \blueheaderfont{##1}]}%
	{\item[\llap{\marginfont{##2}}\hskip\labelsep \blueheaderfont{##3}]}%

\newtheoremstyle{graymarginwithyellowheader}%
	{\item[\llap{\marginfont{##2}}\hskip\labelsep \yellowheaderfont{##1}]}%
	{\item[\llap{\marginfont{##2}}\hskip\labelsep \yellowheaderfont{##3}]}%

\newtheoremstyle{graymarginwithitblackheader}%
	{\item[\llap{\marginfont{##2}}\hskip\labelsep \itheaderfont{##1}]}%
	{\item[\llap{\marginfont{##2}}\hskip\labelsep \itheaderfont{##3}]}%

\newtheoremstyle{graymarginwithblueheadern}%
	{\item[\hskip\labelsep \blueheaderfont{##1}]}%
	{\item[\hskip\labelsep \blueheaderfont{##3}]}%

\newtheoremstyle{graymarginwithyellowheadern}%
	{\item[\hskip\labelsep \yellowheaderfont{##1}]}%
	{\item[\hskip\labelsep \yellowheaderfont{##3}]}%

\newtheoremstyle{graymarginwithitblackheadern}%
	{\item[\hskip\labelsep \itheaderfont{##1}]}%
	{\item[\hskip\labelsep \itheaderfont{##3}]}%

\newtheoremstyle{yellowheader}%
	{\item[\hskip\labelsep \yellowheaderfont{##1 ##2}]}%
	{\item[\hskip\labelsep \yellowheaderfont{##3 ##2}]}%

\newtheoremstyle{nonumberproof}
 	{\item[\hskip\labelsep \prooffont{##1}]}%
 	{\item[\hskip\labelsep \prooffont{##3}]}

% qed Umgebung resetten
%\theoremheaderfont{\itshape}
\theorembodyfont{\normalfont}
\theoremstyle{nonumberproof}
\theoremsymbol{}
\renewtheorem{proof}{Beweis.}

% =============================================================================
% 					Theorem Umgebungen
% =============================================================================
% Theorem Umgebungen *MIT* Numerierung
\theoremstyle{graymarginwithblueheader}
\theorembodyfont{\itshape}
\theoremseparator{}
\theoremsymbol{}

\newtheorem{prop}{Satz}[chapter]
\newtheorem{theorem}[prop]{Satz}
\newtheorem{lem}{Lemma}[chapter]
\newtheorem{lemma}[lem]{Lemma}
\newtheorem{defn}{Definition}[chapter]
\newtheorem{definition}[defn]{Definition}
\newtheorem{cor}{Korollar}[chapter]
\newtheorem{korollar}[cor]{Korollar}
\newtheorem{thm}{Theorem}[chapter]

\theoremstyle{yellowheader}
\theorembodyfont{\normalfont}
\theoremseparator{}
\theoremsymbol{}

\newtheorem{ex}{Beispiel}

\theoremstyle{graymarginwithitblackheader}
\theorembodyfont{\normalfont}
\theoremseparator{}
\theoremsymbol{}

\newtheorem{rem}[prop]{Bemerkung.}

% Theorem Umgebungen *OHNE* Numerierung
\theoremstyle{graymarginwithblueheadern}
\theorembodyfont{\itshape}
\theoremseparator{}
\theoremsymbol{}

\renewtheorem{prop*}{Satz}
\renewtheorem{lem*}{Lemma}
\renewtheorem{defn*}{Definition}
\renewtheorem{cor*}{Korollar}

\theoremstyle{graymarginwithyellowheadern}
\theorembodyfont{\normalfont}
\theoremseparator{}
\theoremsymbol{}

\renewtheorem{ex*}{Beispiel}

\theoremstyle{graymarginwithitblackheadern}
\theorembodyfont{\normalfont}
\theoremseparator{}
\theoremsymbol{}

\renewtheorem{rem*}{Bemerkung.}


% =============================================================================
% 					Mathematische Erg�nzungen
% =============================================================================

% funktionierendes \atop
\renewcommand{\atop}[2]{\genfrac{}{}{0pt}{}{#1}{#2}}

\newcommand{\pcal}[1]{
{\text{\scalefont{.82}\ensuremath{\mathscr{#1}}}}
}

\def\smallint{\begingroup\textstyle\scalefont{1.6} \int\endgroup}

\newcommand{\Var}{\mathbf{Var}}
\newcommand{\E}{\mathbf{E}}
\newcommand{\fs}{\text{f.s.}\xspace}
\newcommand{\longto}{\longrightarrow}
\newcommand{\lto}[1]{\overset{L^#1}{\longrightarrow}}
\newcommand{\cto}{\overset{\mathrm{c}}{\longto}}
\newcommand{\Pto}{\overset{\mathbf{P}}{\longto}}
\newcommand{\Dto}{\overset{\mathcal{D}}{\longto}}
\newcommand{\fsto}{\overset{\fs}{\longto}}
\newcommand{\ucp}{\text{ucp}}
\newcommand{\ucpto}{\overset{\ucp}{\longto}}
\newcommand{\dY}{\,\diffd Y}
\newcommand{\Ep}{\pcal{E}}
\newcommand{\ii}{\mathrm{i}}
\newcommand{\Hto}{\overset{\cH^2}{\longto}}
\newcommand{\Mto}{\overset{\MM^2}{\longto}}
\newcommand{\dto}[1]{\overset{d_{#1}}{\longto}}
\newcommand{\m}{\mathfrak{m}}

\DeclareMathOperator*{\Plim}{P-lim}
\DeclareMathOperator*{\Hlim}{\HH^2-lim}

\newcommand{\Poi}{\mathrm{Poi}}

\newcommand{\cadlag}{càdlàg\xspace}
\newcommand{\caglad}{càglàd\xspace}
\newcommand{\Ito}{It\^{o}\xspace}

\newcommand{\Id}{\mathbf{1}}
\renewcommand{\S}{\mathbb{S}}

\newcommand{\dX}{\,\diffd X}
\newcommand{\dZ}{\,\diffd Z}
\newcommand{\dS}{\diffd S}
\newcommand{\D}{\mathbb{D}}
\renewcommand{\L}{\mathbb{L}}

\newcommand{\dTT}{\diffd X}
\newcommand{\dTTT}{\,\diffd X}
\newcommand{\dTTTT}{\xspace\diffd X}

\newcommand{\dcirc}{\!\circ\!}

\newcommand{\bST}{\mathbf{b}\mathrm{ST}}
\newcommand{\bL}{\mathrm{b}\L}
\newcommand{\bPP}{\mathrm{b}\PP}
\newcommand{\MM}{\pcal{M}}

\newcommand{\cH}{\pcal{H}}

\newcommand{\defl}{\coloneq}
\newcommand{\defr}{\eqcolon}

\providecommand{\coloneq}{:=}
\providecommand{\eqcolon}{=:}

\renewcommand{\le}{\leqslant}
\renewcommand{\ge}{\geqslant}

\renewcommand{\iff}{\Leftrightarrow}
\renewcommand{\bar}[1]{\overline{#1}}

\DeclareMathOperator{\Par}{Par}
\renewcommand{\o}{\mathrm{o}}
\DeclareMathOperator{\ch}{ch}
\DeclareMathOperator{\Pf}{Pf}
\DeclareMathOperator{\Hess}{Hess}
\newcommand{\dM}{\,\diffd M}

\newcommand{\ic}{\reflectbox{\rotatebox[origin=c]{180}{\,$\neg$}}\,}

% Abschlusssymbole
\renewcommand{\qed}{{\small\quad~\color{darkblue}\text{\RectangleBold}}}
\newcommand{\fish}%
	{\quad\ensuremath{\color{darkblue}\rtimes}}
\newcommand{\bsp}%
	{\quad\ensuremath{\color{yellow}\blacksquare}}
\newcommand{\map}%
	{\quad\ensuremath{\multimap}}

% Mehr Platz um Quantoren
\let\existsorig\exists 
\renewcommand{\exists}{\ \existsorig\ } 
\let\forallorig\forall 
\renewcommand{\forall}{\ \forallorig\ } 

\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}
\DeclarePairedDelimiter{\lin}{\langle}{\rangle}

\makeatletter
\@ifundefined{DeclarePairedDelimiterX}{%
\newcommand*{\setdef}{\@ifstar{\@setdefStar}{\@setdefNoStar}}
\newcommand*{\@setdefStar}[2]{\left\{#1\,:\,#2\right\}}
\newcommand*{\@setdefNoStar}[2]{\{#1\,:\,#2\}}
}{%
\DeclarePairedDelimiterX{\setdef}[2]{\{}{\}}{#1\,:\,#2}%
}
\makeatother

\DeclarePairedDelimiter{\setd}{\{}{\}}	
\DeclarePairedDelimiter{\com}{[}{]}


\DeclareMathOperator\rad{rad}%						Rad
\DeclareMathOperator\card{card}%					Cardinality
\newcommand{\unito}{\twoheadrightarrow}%			Gleichm��ige Konvergenz
\newcommand{\opento}{\hookrightarrow}%				Von einer offenen Teilmenge nach *
\DeclareMathOperator{\dist}{dist}
\DeclareMathOperator{\Top}{Top}	%					Kategorie der Top R�ume

\newcommand{\dcup}{\dot{\cup}}	%					Disjunkte Vereinigung	

\DeclareMathOperator\trace{tr}%						Spur #2
\DeclareMathOperator\Epi{Epi}%						Epimorphismenring
\DeclareMathOperator\ggT{ggT}%						gr��ter gemeinsamer Teiler
\DeclareMathOperator\kgV{kgV}%						kleinstes gemeinsames Vielfaches
\DeclareMathOperator\adj{adj}%						Adjungierte
\DeclareMathOperator\chr{char}%						Charakteristik des K�rpers
\DeclareMathOperator\ann{ann}%						Annulator
\newcommand\ideal{\trianglelefteq}%					Ideal
\DeclareMathOperator\ind{ind}%						Index
\DeclareMathOperator\rot{rot}%						Rotation

\renewcommand{\C}{\mathbb{C}}%					Komplexe Zahlen
\newcommand{\N}{\mathbb{N}}%					Nat�rlcihe Zahlen
\newcommand{\R}{\mathbb{R}}	%					Reelle Zahlen
\newcommand{\RA}{\overline{\mathbb{R}}}%		Abschluss von R
\newcommand{\Z}{\mathbb{Z}}	%					Ganze Zahlen
\newcommand{\Q}{\mathbb{Q}}%					Rationale Zahlen
\newcommand{\F}{\mathbb{F}}%					Endlicher K�rper
\newcommand{\K}{\mathbb{K}}	%					Beliebiger K�rper
\newcommand{\KH}{\hat{\mathbb{K}}}%				K Hut (\RA/C)

\renewcommand{\AA}{\mathcal{A}}
\newcommand{\BB}{\mathcal{B}}
\newcommand{\CC}{\pcal{C}}
\newcommand{\DD}{\mathcal{D}}
\newcommand{\EE}{\mathcal{E}}
\newcommand{\FF}{\mathcal{F}}
\newcommand{\GG}{\mathcal{G}}
\newcommand{\HH}{\pcal{H}}
\newcommand{\II}{\mathcal{I}}
\newcommand{\JJ}{\mathcal{J}}
\newcommand{\KK}{\mathcal{K}}
\newcommand{\LL}{\mathcal{L}}
%\newcommand{\MM}{\mathcal{M}}
\newcommand{\NN}{\mathcal{N}}
\newcommand{\OO}{\mathcal{O}}
\newcommand{\PP}{\mathcal{P}}
\newcommand{\QQ}{\mathcal{Q}}
\newcommand{\RR}{\mathcal{R}}
\renewcommand{\SS}{\mathcal{S}}
\newcommand{\TT}{\mathcal{T}}
\newcommand{\UU}{\mathcal{U}}
\newcommand{\VV}{\mathcal{V}}
\newcommand{\WW}{\pcal{W}}
\newcommand{\XX}{\mathcal{X}}
\newcommand{\YY}{\mathcal{Y}}
\newcommand{\ZZ}{\mathcal{Z}}

\newcommand{\g}{\mathfrak{g}}
\newcommand{\h}{\mathfrak{h}}

% Griechische Buchstaben
\newcommand{\ph}{\varphi}
\renewcommand{\th}{\vartheta}
\newcommand{\ep}{\varepsilon}

% Differentialformen

\newcommand{\diffd}{\mathrm{d}}
\newcommand{\ddt}{\frac{\diffd}{\dt}}

\newcommand{\dph}{\diffd \ph}
\newcommand{\dth}{\diffd \th}
\newcommand{\dphi}{\diffd \phi}
\newcommand{\dpsi}{\diffd \psi}

\newcommand{\dL}{\diffd L}
\newcommand{\dR}{\diffd R}

\newcommand{\dg}{\diffd g}

\newcommand{\dpi}{\diffd \pi}
\newcommand{\domega}{\diffd \omega}
\newcommand{\dsigma}{\diffd \sigma}
\newcommand{\dtau}{\diffd \tau}
\newcommand{\dOmega}{\diffd \Omega}
\newcommand{\dzeta}{\diffd \zeta}
\newcommand{\dxi}{\diffd \xi}

\newcommand{\dmu}{\diffd \mu}
\newcommand{\dnu}{\diffd \nu}
\newcommand{\dlambda}{\diffd \lambda}
\newcommand{\dlamb}[1]{\diffd \lambda^{#1}}
\newcommand{\dmumu}{\diffd (\mu\otimes\mu')}
\newcommand{\drho}{\diffd \rho}

\newcommand{\db}{\diffd b}

\newcommand{\df}{\diffd f}
\newcommand{\dF}{\diffd F}

\newcommand{\dH}{\diffd H}

\newcommand{\dk}{\diffd k}
\newcommand{\dn}{\diffd n}

\newcommand{\ddp}{\diffd p}
\newcommand{\dP}{\diffd P}

\newcommand{\ddq}{\diffd q}
\newcommand{\ddotq}{\diffd \dot{q}}

\newcommand{\dr}{\diffd r}
\newcommand{\ds}{\diffd s}
\newcommand{\dt}{\diffd t}

\newcommand{\du}{\diffd u}
\newcommand{\dv}{\diffd v}
\newcommand{\dw}{\diffd w}

\newcommand{\dx}{\diffd x}
\newcommand{\dy}{\diffd y}
\newcommand{\dz}{\diffd z}

\newcommand{\dA}{\diffd A}
\newcommand{\dB}{\diffd B}
\newcommand{\dE}{\diffd E}
\newcommand{\dN}{\diffd N}

\newcommand{\dQ}{\diffd Q}
\newcommand{\dV}{\diffd V}
\newcommand{\dW}{\diffd W}

\newcommand{\const}{\mathrm{const}}

\newcommand{\e}{\mathrm{e}}

\renewcommand\Im{\mathrm{Im}}
\renewcommand\Re{\mathrm{Re}}
%
%
\DeclareMathOperator\sign{sign}
\DeclareMathOperator\supp{supp}